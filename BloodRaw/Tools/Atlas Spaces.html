<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Выравнивание ключей</title>

<link rel="stylesheet" href="../Source/css.css">

<style>
html, button, input {
	font-size: 1.25em;
	text-shadow: 0.135em 0.125em 0px color-mix(in srgb, currentColor 30%, black);
}
body { padding: 0 20px; }
textarea {
	width: 100%;
	height: 275px;
}
</style>
</head>

<body>
<h2>Выравнивание ключей</h2>

<p>Не выравненное</p>
<textarea id="input" autocomplete="off" spellcheck="false" placeholder='						"diagonal_left.png": ["Texture", "R/T/E/Banner/.png"],
						"diagonal_right.png": ["Texture", "R/T/E/Banner/.png"],
						"diagonal_up_left.png": ["Texture", "R/T/E/Banner/.png"],
						"diagonal_up_right.png": ["Texture", "R/T/E/Banner/.png"],'></textarea>
<br>

<button onclick="alignKeys()">Конвертировать</button>

<p style="margin-top: 30px;">Выравненное</p>
<button onclick="copyOutput()">Скопировать результат</button>
<textarea id="output" readonly placeholder='						"diagonal_left.png"     : ["Texture", "R/T/E/Banner/.png"],
						"diagonal_right.png"    : ["Texture", "R/T/E/Banner/.png"],
						"diagonal_up_left.png"  : ["Texture", "R/T/E/Banner/.png"],
						"diagonal_up_right.png" : ["Texture", "R/T/E/Banner/.png"],'></textarea>

<script>
function alignKeys() {
	const input = document.getElementById("input").value;
	const lines = input.split('\n');

	// Фильтруем только строки, где есть ключи формата "ключ":
	let keyLines = lines.filter(line => line.match(/^\s*".+?"\s*:/));
	if (keyLines.length === 0) {
		document.getElementById("output").value = "";
		return;
	}

	// Определяем максимальную длину ключа (включая кавычки и отступ)
	let maxKeyLen = 0;
	const keyRegex = /^(\s*)"([^"]+)"\s*:/;

	lines.forEach(line => {
		const match = line.match(keyRegex);
		if (match) {
			const totalLength = match[1].length + match[2].length + 2; // кавычки + отступ
			if (totalLength > maxKeyLen) maxKeyLen = totalLength;
		}
	});

	// Формируем выровненные строки
	const newLines = lines.map(line => {
		const match = line.match(keyRegex);
		if (!match) return line;

		const indent = match[1];
		const key = `"${match[2]}"`;
		const after = line.split(':').slice(1).join(':').trimStart();

		const spacesNeeded = maxKeyLen - (indent.length + key.length);
		const padding = ' '.repeat(spacesNeeded > 0 ? spacesNeeded : 0);
		return `${indent}${key}${padding}: ${after}`;
	});

	document.getElementById("output").value = newLines.join('\n');
}

function copyOutput() {
	const outputField = document.getElementById("output");
	outputField.select();
	outputField.setSelectionRange(0, 99999);
	document.execCommand("copy");
}
</script>
</body>
</html>
