<!DOCTYPE HTML>
<meta charset="utf-8">
<title>MyVideos</title>
<link rel="icon" type="image/x-icon" href="source/myVideo.ico">

<style>
*{
	font-family: "Arial", sans-serif;
	box-sizing: border-box;
	cursor: default;
}

html{
	background-image: url("source/background_.png");
	overflow-x: hidden;
	scrollbar-width: thin;
}

body{
	margin: 0;
}

.FullscreenGradient{
	width: 100vw;
	height: 100vh;
	min-width: 1200px;
	position: fixed;
	left: 50%;
	transform: translateX(-50%);
	background-image: url('source/gradient.png');
	background-size: contain;
	background-position: center;
	pointer-events: none;
	opacity: 0.3;
}

.Header, .Footer{
	width: 100vw;
	height: 25px;
	box-sizing: content-box;
	background-color: rgb(240, 240, 240);
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25), 0 0 20px rgba(0, 0, 0, 0.15);
	border-block: 2px solid rgba(255, 255, 255, 1);
	display: flex;
	justify-content: center;
	align-items: center;
	gap: 5px;
}

.Header input{
	width: 800px;
	padding: 2px 6px;
	border-radius: 4px;
	border: 1px solid rgba(0,0,0,0.2);
	outline: none;
	cursor: text;
}

.Footer{
	height: 100px;
}


.FooterPanel{
	background-color: rgb(170, 170, 170);
	border: 2px solid rgba(255, 255, 255, 1);
	border-radius: 8px;
	padding: 10px;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
	color: black;

	display: flex;
	gap: 6px;
	align-items: center;
}

.PageWrapper{
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

.ContentWrapper{
	width: 100vw;
	display: flex;
	justify-content: center;
	
	flex-grow: 1;
}

#Content{
	width: 900px;
	display: flex;
	flex-direction: column;
	gap: 10px;
	margin-block: 10px;
}

.VideoPanel{
	width: 100%;
	border: 2px solid rgba(255, 255, 255, 1);
	border-radius: 8px;
	padding: 10px;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
	color: black;
	display: flex;
	flex-direction: column;
	gap: 2px;
}

.ImageURL, .ImageURL *{
	cursor: pointer;
}

.VideoPanel a:not(.URL):not(.ImageURL){
	display: inline-block;
	text-decoration: none;
	color: #fff;
	background-color: rgba(0, 123, 255, 0.8);
	border-radius: 6px;
	font-size: 14px;
	font-weight: 500;
	transition: all 0.2s ease;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
	cursor: pointer;
}

.VideoPanel a:not(.URL):not(.ImageURL):hover{
	background-color: rgba(0, 123, 255, 1);
	transform: scale(1.05);
	box-shadow: 0 4px 12px rgba(200, 200, 255, 1);
}

.SmallPanel{
	display: inline-block;
	padding: 2px 6px;
	background-color: rgba(0, 0, 0, 0.15);
	color: white;
	font-size: 12px;
	font-weight: 500;
	border-radius: 4px;
	border: 1px solid rgba(255, 255, 255, 0.3);
	white-space: nowrap;
}

#Tooltip{
	position: fixed;
	background-color: rgba(0,0,0,0.5);
	color: white;
	padding: 4px 8px;
	border-radius: 4px;
	font-size: 12px;
	pointer-events: none;
	white-space: pre-line;
	z-index: 9999;
	display: none;
	border: 1px solid rgba(255, 255, 255, 1);
	backdrop-filter: blur(6px);
}

[tooltip]:not(.ImageURL){
	cursor: help;
}

.URL{
	color: #4DA6FF;
	text-decoration: none;
	font-weight: 500;
	transition: all 0.2s ease;
	cursor: pointer;
}

.URL:hover{
	color: #1A8CFF;
	text-decoration: underline;
}

.URL:active{
	color: #0066CC;
}
</style>

<body>

<div class="PageWrapper">

<div id="ErrorNotification" style="
	position: fixed;
	bottom: 20px;
	right: 20px;
	background-color: rgba(255,0,0,0.8);
	backdrop-filter: blur(6px);
	color: white;
	padding: 10px 15px;
	border-radius: 6px;
	font-family: Arial, sans-serif;
	font-size: 14px;
	display: none;
	z-index: 99999;
	max-width: 300px;
	word-break: break-word;
	box-shadow: 0 2px 6px rgba(0,0,0,0.5);
"></div>

<div class="FullscreenGradient"></div>
<div class="Header" tooltip='
–ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –ø–æ–∏—Å–∫—É
<hr>
"-" –≤ –Ω–∞—á–∞–ª–µ, —ç—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ<br>
"+" –≤ –Ω–∞—á–∞–ª–µ, —ç—Ç–æ –ò–õ–ò
<hr>
name:"" - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏<br>
description:"" - –ü–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é<br>
id:0 - –ü–æ–∏—Å–∫ –ø–æ ID<br>
tag:"" - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–µ–≥–∞<br>
tag:0 - –ü–æ–∏—Å–∫ –ø–æ ID —Ç–µ–≥–∞<br>
visible:0 - –ü–æ–∏—Å–∫ –ø–æ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ (0 - –°–∫—Ä—ã—Ç–æ, 1 - –°—Å—ã–ª–∫–∞, 2 - –ü—É–±–ª–∏—á–Ω–æ–µ, 3 - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ)
<hr>
sort:id - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ ID<br>
sort:name - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏<br>
sort:creation - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è<br>
sort:publish - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏<br>
sort:duration - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∏–¥–µ–æ<br>
sort:random:0 - –°–ª—É—á–∞–π–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Å —É—á—ë—Ç–æ–º —Å–∏–¥–∞ (–µ—Å–ª–∏ —Å–∏–¥ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –±—É–¥–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ)<br>
sort:tags - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª-–≤—É —Ç–µ–≥–æ–≤<br>
*:reverse - –†–µ–≤–µ—Ä—Å–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
'>
	<input oninput="Search()" placeholder="–ü–æ–∏—Å–∫..." id="Search" type="text">
</div>
<div class="ContentWrapper"><div id="Content"></div></div>

<div class="Footer">
	<div class="FooterPanel">
		<div class="SmallPanel" id="Info_TotalVideo"></div>
		<div class="SmallPanel" id="Info_TotalDuration"></div>
		<div class="SmallPanel" id="Info_Visible"></div>
	</div>
</div>

</div>

</body>

<script src="source/Videos.js"></script>
<script>

var Content = document.getElementById("Content")

function ShowErrorNotification(Message){
	const Div = document.getElementById("ErrorNotification")
	Div.textContent = Message
	Div.style.display = "block"
	clearTimeout(Div.timeout)
	Div.timeout = setTimeout(() => { Div.style.display = "none" }, 6000)
}

window.onerror = function(message, source, lineno, colno, error){
	var Message = `${message} (${source}:${lineno}:${colno})`
	console.error(Message)
	ShowErrorNotification(Message)
	return false
}

window.onunhandledrejection = function(event){
	var Message = `Unhandled Promise Rejection: ${event.reason}`
	console.error(Message)
	ShowErrorNotification(Message)
}

var CurrentURL = window.location.href.split("#")[0]

function RandomColor(Seed, Whiteness){
	var Hash = 2166136261

	for(var i = 0; i < Seed.length; i++){
		Hash ^= Seed.charCodeAt(i)
		Hash += (Hash << 1) + (Hash << 4) + (Hash << 7) + (Hash << 8) + (Hash << 24)
	}

	var R = (Hash >> 16) & 0xFF
	var G = (Hash >> 8)  & 0xFF
	var B =  Hash        & 0xFF

	if(Whiteness == null){ Whiteness = 0 }

	R = Math.round(R + (255 - R) * Whiteness)
	G = Math.round(G + (255 - G) * Whiteness)
	B = Math.round(B + (255 - B) * Whiteness)

	function ToHex(Byte){ return Byte.toString(16).padStart(2, "0") }

	return "#" + ToHex(R) + ToHex(G) + ToHex(B)
}

function UpdateContent(VideosList){
	const AddedIDs = new Set()

	Content.innerHTML = ""
	
	var TotalDuration = 0
	var TotalVisible  = 0
	
	function DurationToSeconds(D){
		const Parts = D.split(":").map(Number)

		if(Parts.length === 2){
			return Parts[0] * 60 + Parts[1]
		}else if(Parts.length === 3){
			return Parts[0] * 3600 + Parts[1] * 60 + Parts[2]
		}
	}
	
	for(var i = 0; i < VideosList.length; i++){
		var Video = VideosList[i]

		var ID           = Video[0]
		var Name         = Video[1]
		var CreationDate = Video[2]
		var YoutubeID    = Video[3]
		var PublishDate  = Video[4]
		var Duration     = Video[5]
		var Visibility   = Video[6]
		var Tags         = Video[7]
		var Description  = Video[8]

		try{
			if(ID           == DEFAULT_ID       ){ throw new Error("ID –ø—É—Å—Ç!"          ) }
			if(CreationDate == DEFAULT_Creation ){ throw new Error("CreationDate –ø—É—Å—Ç!") }
			if(YoutubeID    == DEFAULT_YoutubeID){ throw new Error("YoutubeID –ø—É—Å—Ç!"   ) }
			if(PublishDate  == DEFAULT_Publish  ){ throw new Error("PublishDate –ø—É—Å—Ç !") }
			if(Duration     == DEFAULT_Duration ){ throw new Error("Duration –ø—É—Å—Ç!"    ) }
			if(AddedIDs.has(ID)){ throw new Error("–í–∏–¥–µ–æ —Å —Ç–∞–∫–∏–º ID —É–∂–µ –µ—Å—Ç—å!") }
		}catch(e){
			console.error(e)
			throw new Error("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ [" + Video + "]!")
		}

		AddedIDs.add(ID)
		TotalDuration += DurationToSeconds(Duration)
		
		if(Visibility == P_Link || Visibility == P_Public){ TotalVisible += 1 }

		var WatchURL = "https://youtu.be/" + YoutubeID

		const Height = "21px"

		var TagsHTML = ""
		for(var j = 0; j < Tags.length; j++){
			var TagID = Tags[j]
			var Tag = TAGS[TagID]
			var TagName        = Tag[0]
			var TagIcon        = Tag[1]
			var TagDescription = Tag[2]
			TagsHTML += `<a
				class="ImageURL"
				href="${CurrentURL}#tag%3A${TagID}"
				tooltip="<b>[${TagID}] ${TagName}</b><br>${TagDescription}"
			><img 
				style="
					width:${Height};
					height:${Height};
					border-radius: 5px;
					aspect-ratio: 1 / 1;
				"
				src="${Tag[1]}"
				alt="${Tag[0]}"
			></a>`;
		}
		
		var VisibilityText = (Visibility == P_Hide ? "üîí –°–∫—Ä—ã—Ç–æ" : (Visibility == P_Link ? "üîó –°—Å—ã–ª–∫–∞" : (Visibility == P_Blocked ? "üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ" : "üåê –ü—É–±–ª–∏—á–Ω–æ–µ")))

		function FormatDateTime(Input){
			if(Input === UNKNOWN_Date){ return "??.??.????" }
		
			const Parts    = Input.split(" ")
			const DatePart = Parts[0]
			const TimePart = Parts[1]

			const [Y, M, D] = DatePart.split(".")

			function Pad2(N){ return String(N).padStart(2, "0") }

			if(TimePart){
				var [H, m, S] = TimePart.split(":")
				H = parseInt(H, 10)
				m = parseInt(m, 10)
				return `${Pad2(H)}:${Pad2(m)} | ${Pad2(D)}.${Pad2(M)}.${Y}`
			}else{
				return `${Pad2(D)}.${Pad2(M)}.${Y}`
			}
		}

		var CreationDateText = FormatDateTime(CreationDate)
		var PublishDateText  = FormatDateTime(PublishDate )
		
		var DurationText = Duration
		
		function FormatDescription(Input){
			function FormatURL(Input){
				const Pattern = /(https?:\/\/[^\s]+)/g
				return Input.replace(Pattern, (URL) => {
					var EndChar = ""
					if(/[)\]\},.?]/.test(URL.slice(-1))){
						EndChar = URL.slice(-1)
						URL = URL.slice(0, -1)
					}
					return `<a class="URL" href="${URL}"">${URL}</a>${EndChar}`
				})
			}
			
			function FormatTimeCode(Input){
				const Pattern = /\b(\d{1,2}:\d{2}(?::\d{2})?)\b/g

				return Input.replace(Pattern, (TimeCode) => {
					return `<a class="URL" href="${WatchURL}&t=${DurationToSeconds(TimeCode)}">${TimeCode}</a>`
				})
			}
			
			function FormatIDLink(Input){
				return Input.replace(/\[(\d+)\]/g, (M, ID) => {
					const Video = VIDEOS.find(V => V[0] === parseInt(ID, 10))
					if(Video){
						return `<a class="URL" href="${CurrentURL}#id%3A${ID}">${M}</a>`
					}
					return M
				})
			}
			
			return FormatIDLink(FormatTimeCode(FormatURL(Input)))
		}
		
		var DescriptionText = FormatDescription(Description)
		var NameText        = FormatDescription(Name)

		var VideoContent = `<div style="display: flex; gap: 5px;">
			<div class="SmallPanel" style="height:${Height};">${ID}</div>
			<div style="flex-grow: 1;">${NameText}</div>
			<div style="display: flex; flex; gap: 2px;">${TagsHTML}</div>
			<div class="SmallPanel" tooltip="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ: ${Duration}" style="height:${Height};">${DurationText}</div>
			<div class="SmallPanel" tooltip="–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${CreationDate === UNKNOWN_Date ? '????.??.??' : CreationDate}" style="height:${Height};">${CreationDateText}</div>
			<div class="SmallPanel" tooltip="–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: ${PublishDate}" style="height:${Height};">${PublishDateText}</div>
			<div class="SmallPanel" style="height:${Height};">${VisibilityText}</div>
			<a tooltip="–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –Ω–∞ YouTube" href="${WatchURL}" style="height:${Height};">üëÅÔ∏è</a>
			<a tooltip="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ –≤ YouTube Studio" href="https://studio.youtube.com/video/${YoutubeID}/edit" style="height:${Height};">‚úèÔ∏è</a>
		</div>
<div style="color: rgba(0, 0, 0, 0.5);">${DescriptionText}</div>`
		
		var Panel = document.createElement("div")
		Panel.className = "VideoPanel"
		Panel.innerHTML = VideoContent
		Panel.style.backgroundColor = RandomColor(PublishDateText, 0.7)

		Content.appendChild(Panel)
	}
	
	function UpdateInfo(){
		document.getElementById("Info_TotalVideo").innerHTML = "–í–∏–¥–µ–æ: "     + VideosList.length
		document.getElementById("Info_Visible"   ).innerHTML = "–ü—É–±–ª–∏—á–Ω—ã—Ö: " + TotalVisible
		
		function SecondsToDuration(S){
			const D   = Math.floor( S / 86400        )
			const H   = Math.floor((S % 86400) / 3600)
			const M   = Math.floor((S % 3600 ) / 60  )
			const Sec = S % 60

			const Pad2 = N => String(N).padStart(2, "0")

			var Result = ""

			if(         D > 0){ Result += D + ":" }
			if(H > 0 || D > 0){ Result += Pad2(H) + ":" }

			Result += Pad2(M) + ":" + Pad2(Sec)

			return Result
		}
		
		document.getElementById("Info_TotalDuration").innerHTML = "–í—Ä–µ–º—è: " + SecondsToDuration(TotalDuration)
	}
	UpdateInfo()
}

var Tooltip = document.createElement("div")
Tooltip.id = "Tooltip"
document.body.appendChild(Tooltip)

document.addEventListener("mouseover", function(e) {
	var Target = e.target.closest("[tooltip]")
	if(Target){
		Tooltip.innerHTML = Target.getAttribute("tooltip")
		Tooltip.style.display = "block"
	}
})

document.addEventListener("mousemove", function(e){
	if(Tooltip.style.display === "block"){
		Tooltip.style.left = (e.clientX + 25) + "px"
		Tooltip.style.top = (e.clientY) + "px"
	}
})

document.addEventListener("mouseout", function(e){
	var Target = e.target.closest("[tooltip]")
	if(Target){
		Tooltip.style.display = "none"
	}
})

function RandomWithSeedGenerator(Seed){
	var V = (Seed + 61266) >>> 0
	
	return function(){
		V ^= V << 13
		V ^= V >> 17
		V ^= V << 5
		return (V >>> 0) / 4294967296
	}
}

function ShuffleArrayWithSeed(Array, Seed){
	const Random = RandomWithSeedGenerator(Seed)
	for(var i = Array.length - 1; i > 0; i--){
		const j = Math.floor(Random() * (i + 1))
		
		const Temp = Array[i]
		Array[i] = Array[j]
		Array[j] = Temp
	}
	return Array
}

var SearchInput = document.getElementById("Search")

var CurrentRawText = "~~~"
function Search(){
	var RawText = SearchInput.value.trim()
	if(CurrentRawText == RawText){ return } CurrentRawText = RawText
	
	if(RawText){
		window.location.hash = encodeURIComponent(RawText)
	} else {
		history.replaceState(null, null, " ")
	}
	
	const Parts = RawText.match(/-?(\w+:"[^"]+"|\S+)/g) || []
	var SearchConditions = []
	var SortMethod       = null
	var SortReverse      = false
	var SortSeed         = 0
	
	for(const Part of Parts){
		var Lower = Part.toLowerCase()
		if(Lower.startsWith("sort:")){
			const SortParts = Lower.split(":")
			
			var Method = SortParts[1]
			if(Method === "name" || Method === "creation" || Method === "publish" || Method === "duration" || Method === "id" || Method === "random" || Method === "tags"){ SortMethod = Method }
			
			if(Method === "random"){
				if(SortParts[2] && /^\d+$/.test(SortParts[2])){
					SortSeed = parseInt(SortParts[2], 10)
				}else{
					SortSeed = Date.now()
				}
			}
			
			if(SortParts[2] === "reverse" || SortParts[3] === "reverse"){ SortReverse = true }
			continue
		}
		
		var Exclude = false
		var OR      = false
		var Field   = "any"
		var Value   = Part
		
		if(Part.startsWith("-")){
			Exclude = true
			Value   = Part.slice(1)
		}
		
		if(Part.startsWith("+")){
			OR    = true
			Value = Part.slice(1)
		}
		
		const FieldMatch = Value.match(/^(\w+):"([^"]+)"$/)
        if(FieldMatch){
            Field = FieldMatch[1].toLowerCase()
            Value = FieldMatch[2]
        }else if(Value.startsWith("id:")){
			Field = "id"
			Value = Value.slice(3)
		}else if(Value.startsWith("tag:")){
			Field = "tag"
			Value = Value.slice(4)
		}else if(Value.startsWith("visible:")){
			Field = "visible"
			Value = Value.slice(8)
		}
		
		SearchConditions.push({Field: Field, Value: Value.toLowerCase(), Exclude: Exclude, OR: OR})
	}
	
	var FilteredVideos = (SearchConditions.length == 0 ? [...VIDEOS] : VIDEOS.filter(Video => {
		const [ID, Name, CreationDate, YoutubeID, PublishDate, Duration, Visibility, Tags, Description] = Video
		
		function Filter(Condution){
			var M = false
			if(Condution.Field == "name"){
				M = Name.toLowerCase().includes(Condution.Value)
			}else if(Condution.Field == "description"){
				M = Description.toLowerCase().includes(Condution.Value)
			}else if(Condution.Field == "id"){
				M = ID === parseInt(Condution.Value, 10)
			}else if(Condution.Field === "tag"){
				const TagValue = Condution.Value.toLowerCase()
				if(/^\d+$/.test(TagValue)){
					const TagID = parseInt(TagValue, 10)
					M = Tags.includes(TagID)
				}
				else {
					M = Tags.some(TagID => {
						const TagName = TAGS[TagID][0].toLowerCase()
						return TagName.includes(TagValue)
					})
				}
			}else if(Condution.Field == "visible"){
				M = Visibility === parseInt(Condution.Value, 10)
			}
			
			if(Condution.Exclude){ M = !M }
			return M
		}
		
		var ORGroup  = SearchConditions.filter(C =>  C.OR)
		var AndGroup = SearchConditions.filter(C => !C.OR)
		
		if(!AndGroup.every(C => Filter(C))){ return false }
		if(ORGroup.length > 0 && !ORGroup.some(C => Filter(C))){ return false }
		
		return true
	}))
	
	if(SortMethod){
		if(SortMethod == "random"){
			ShuffleArrayWithSeed(FilteredVideos, SortSeed || 0)
		}else{
			FilteredVideos.sort((A, B) => {
				if(SortMethod === "name"){
					return A[1].localeCompare(B[1])
				}else if(SortMethod === "creation"){
					return new Date(A[2]) - new Date(B[2])
				}else if(SortMethod === "publish"){
					return new Date(A[4]) - new Date(B[4])
				}else if(SortMethod === "duration"){
					const ToSeconds = T => {
						const P = T.split(":").map(Number)
						if(P.length === 2){ return P[0] * 60 + P[1] }
						return P[0] * 3600 + P[1] * 60 + P[2]
					}
					return ToSeconds(A[5]) - ToSeconds(B[5])
				}else if(SortMethod === "id"){
					return A[0] - B[0]
				}else if(SortMethod === "tags"){
					return A[7].length - B[7].length
				}
				return 0
			})
		}

		if(SortReverse) FilteredVideos.reverse()
	}
	
	UpdateContent(FilteredVideos)
}

window.addEventListener("load", () => {
	if(window.location.hash){
		SearchInput.value = decodeURIComponent(window.location.hash.substring(1))
		Search()
	}else{
		Search()
	}
})

window.addEventListener("hashchange", () => {
	const RawText = decodeURIComponent(window.location.hash.substring(1))
	if(RawText !== SearchInput.value){
		SearchInput.value = RawText
		Search()
	}
})

</script>